<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>#{{ site.github.run_number }}: {{ page.title | default: site.title }}:</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    <script src="{{ "/assets/js/allure-split-mode.js" | relative_url }}" defer></script>
  </head>
  <body>
  <body class="{% if page.wide_mode %}wide-mode{% endif %}">
    <div class="wrapper">
      <header>
        <h1><a href="{{ '/' | relative_url }}">{{ site.title | default: "Project Quality Report" }} ALLURE</a></h1>
        
        <nav>
          <ul class="nav-menu">
            {% assign home_url = '/' | relative_url %}
            <li {% if page.url == home_url or page.url == '/index.html' %}class="active"{% endif %}>
              <a href="{{ home_url }}">
                <img src="{{ '/assets/img/allure.svg' | relative_url }}" alt="Allure Icon" class="nav-icon">Allure Report
              </a>
            </li>

            {% assign swiftlint_url = '/reports/swiftlint/' | relative_url %}
            <li {% if page.url == swiftlint_url %}class="active"{% endif %}>
              <a href="{{ swiftlint_url }}">
                <img src="{{ '/assets/img/swiftlint.png' | relative_url }}" alt="SwiftLint Icon" class="nav-icon">SwiftLint
              </a>
            </li>

            {% assign swiftformat_url = '/reports/swiftformat/' | relative_url %}
            <li {% if page.url == swiftformat_url %}class="active"{% endif %}>
              <a href="{{ swiftformat_url }}">
                <img src="{{ '/assets/img/swiftformat.png' | relative_url }}" alt="SwiftFormat Icon" class="nav-icon">SwiftFormat
              </a>
            </li>

            {% assign coverage_url = '/reports/coverage/' | relative_url %}
            <li {% if page.url == coverage_url %}class="active"{% endif %}><a href="{{ coverage_url }}"><img src="{{ '/assets/img/xcode.png' | relative_url }}" alt="Coverage Icon" class="nav-icon">Coverage</a></li>
          </ul>
        </nav>
        <div class="dashboard-container">
          <fieldset class="dashboard-block">
            <legend>Runs:</legend>
            <div class="scrollable-list">
              <ul>
                {% for run in page.runs %}
                  <li>
                    <span class="status-icon 
                      {% if run.status == 'success' %}success{% elsif run.status == 'failure' %}failed{% else %}cancelled{% endif %}">
                      {% if run.status == 'success' %}✔{% elsif run.status == 'failure' %}✖{% else %}●{% endif %}
                    </span>
                    <a href="{{ run.url | relative_url }}">#{{ run.number }} ({{ run.hash }})</a><span class="run-date">{{ build.date }}</span>
                  </li>
                {% endfor %}
              </ul>
            </div>
          </fieldset>
          {% if page.is_main_branch %}
            <fieldset class="dashboard-block">
              <legend>Branches:</legend>
              <div class="scrollable-list">
                <ul>
                  {% for branch in page.branches %}
                    <li><a href="#">{{ branch }}</a></li>
                  {% endfor %}
                </ul>
              </div>
            </fieldset>
          {% endif %}
        </div>
      </header>
      <section class="main-content">
        {% if page.iframe_path %}
            <iframe id="allure-frame" src="{{ page.iframe_path | relative_url }}" style="width: 100%; border: none; border-radius: 5px; height: 100%;" scrolling="yes"></iframe>
        {% endif %}
      </section>
    </div>
    <footer>
      <div class="footer-left">
        <span><a href="{{ site.github.repository_url }}/tree/{{ site.github.ref_name }}" target="_blank">{{ site.github.ref_name }}</a></span>
        <span>#<a href="{{ site.github.repository_url }}/actions/runs/{{ site.github.run_id }}" target="_blank">{{ site.github.run_number }}</a></span>
      </div>
      <div class="footer-right">
        <span><a href="https://github.com/{{ site.github.actor }}" target="_blank">@{{ site.github.actor }}</a></span>
        <span>{{ site.github.event_name }}</span>
        <span><a href="{{ site.github.repository_url }}/commit/{{ site.github.sha }}" target="_blank">{{ site.github.sha | truncate: 7, "" }}</a></span>
        <span>{{ site.time | date: "%d-%m-%Y %H:%M:%S" }}</span>
      </div>
    </footer>
  </body>
</html>